async function fetchSummary() {
    console.log("ğŸ”¥ fetchSummary() function triggered!");

    const topic = document.getElementById("topicInput").value.trim();
    const resultDiv = document.getElementById("result");

    if (!topic) {
        resultDiv.innerHTML = "<p style='color: red;'>Please enter a topic!</p>";
        return;
    }

    resultDiv.innerHTML = "<p>Loading...</p>";

    const BASE_URL = window.location.hostname.includes("localhost") 
        ? "http://127.0.0.1:8000" 
        : "https://azukimedia.up.railway.app";

    try {
        console.log(`ğŸ”— Fetching: ${BASE_URL}/summary/${encodeURIComponent(topic)}`);

        const response = await fetch(`${BASE_URL}/summary/${encodeURIComponent(topic)}`, {
            method: "GET",
            headers: { "Accept": "application/json" }
        });

        console.log("ğŸŸ¢ Response Status:", response.status);

        if (!response.ok) {
            throw new Error(`âŒ Server error: ${response.status} - ${response.statusText}`);
        }

        const data = await response.json();
        console.log("âœ… API Response:", data);  // âœ… Log the full response

        // ğŸ”¹ Ensure `data.summary` is correctly displayed
        let summaryText = "No summary available.";
        if (typeof data.summary === "string") {
            summaryText = data.summary.replace(/\n/g, "<br>");  // âœ… Convert line breaks to HTML
        } else if (data.summary && typeof data.summary.raw === "string") {
            summaryText = data.summary.raw.replace(/\n/g, "<br>");  // âœ… Handle nested object case
        }

        resultDiv.innerHTML = `
            <h3>ğŸ“¢ Latest "${topic}" Updates:</h3>
            <div style="background:#F5F8FA; border-radius:10px; padding:15px; text-align:left;">
                ${summaryText}
            </div>
        `;
    } catch (error) {
        console.error("ğŸš¨ Fetch error:", error);
        resultDiv.innerHTML = `<p style='color: red;'>Error fetching summary: ${error.message}. Try again!</p>`;
    }
}
